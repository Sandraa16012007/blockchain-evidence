// Role Management Utility\nclass RoleManager {\n    constructor() {\n        this.roleMapping = {\n            'public_viewer': 'dashboard-public.html',\n            'investigator': 'dashboard-investigator.html',\n            'forensic_analyst': 'dashboard-analyst.html',\n            'legal_professional': 'dashboard-legal.html',\n            'court_official': 'dashboard-court.html',\n            'evidence_manager': 'dashboard-manager.html',\n            'auditor': 'dashboard-auditor.html',\n            'admin': 'admin.html'\n        };\n    }\n\n    getCurrentRole() {\n        return localStorage.getItem('selectedRole');\n    }\n\n    isRoleSelected() {\n        return localStorage.getItem('roleWizardCompleted') === 'true' && \n               localStorage.getItem('selectedRole') !== null;\n    }\n\n    getDashboardUrl(role) {\n        return this.roleMapping[role] || 'dashboard.html';\n    }\n\n    redirectToDashboard(role = null) {\n        const selectedRole = role || this.getCurrentRole();\n        if (selectedRole) {\n            const dashboardUrl = this.getDashboardUrl(selectedRole);\n            window.location.href = dashboardUrl;\n        } else {\n            window.location.href = 'index.html';\n        }\n    }\n\n    checkRoleAccess(requiredRole = null) {\n        const currentRole = this.getCurrentRole();\n        \n        if (!this.isRoleSelected()) {\n            window.location.href = 'index.html';\n            return false;\n        }\n\n        if (requiredRole && currentRole !== requiredRole) {\n            this.redirectToDashboard();\n            return false;\n        }\n\n        return true;\n    }\n\n    resetRole() {\n        localStorage.removeItem('roleWizardCompleted');\n        localStorage.removeItem('selectedRole');\n        window.location.href = 'index.html';\n    }\n}\n\n// Global instance\nconst roleManager = new RoleManager();\n\n// Auto-redirect if on wrong dashboard\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Skip check for index page\n    if (window.location.pathname.includes('index.html') || window.location.pathname === '/') {\n        return;\n    }\n\n    // Check if user has selected a role\n    if (!roleManager.isRoleSelected()) {\n        window.location.href = 'index.html';\n        return;\n    }\n\n    // Get current page and expected page\n    const currentPage = window.location.pathname.split('/').pop();\n    const currentRole = roleManager.getCurrentRole();\n    const expectedPage = roleManager.getDashboardUrl(currentRole).split('/').pop();\n\n    // Redirect if on wrong dashboard\n    if (currentPage !== expectedPage && currentPage !== 'index.html') {\n        roleManager.redirectToDashboard();\n    }\n});\n\n// Export for use in other scripts\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = { RoleManager, roleManager };\n}